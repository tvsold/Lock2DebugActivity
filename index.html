<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lock 2 Debugging Challenge</title>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Fira Code', sans-serif;
      background-color: black;
      color: greenyellow;
      padding: 20px;
      margin: 0;
      font-size: 18px;
    }

    h3 {
      background-color: black;
      padding: 20px;
      position: relative;
      top: -10px;
      margin-bottom: -10px;
      color: greenyellow;
      text-align: center;
      overflow: hidden; /*Ensures the content is not revealed until the animation*/
      border-right: .15em solid rgb(0, 0, 255); /* The typwriter cursor*/
      white-space: nowrap; /*Keeps the content on a single line*/
      margin: 0 auto; /*Gives that scrolling effect as the typing happens*/
      letter-spacing: .15em;
      animation: 
        typing 2s steps(40, end),
        blink-caret .6s step-end infinite; /*Blinking cursor effect*/
    }

    /* The typing effect */
    @keyframes typing {
      from { width: 0 }
      to { width: 19ch }
    }

    /* The typewriter cursor effect */
    @keyframes blink-caret {
      from, to { border-color: transparent; }
      50% { border-color: white; }
    }

    h3.finished {
      border-right: none; /* Removes the blinking cursor */
      animation: typing 2s steps(40, end);
    }

    #start {
      overflow: hidden;
      color: greenyellow;
    }

    button {
      margin: 10px;
      padding: 10px 15px;
      margin-top: 10px;
      font-size: 16px;
      background-color: #00ff99;
      color: #0b0c10;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Fira Code', sans-serif;
    }

    button:hover {
      background-color: #00cc77;
    }

    label {
      color: greenyellow;
    }

    .pass, .pass2, .pass3, .pass4 {
      display: none;
    }

    .response {
      margin-left: 20px;
      color: #FFD700;
      display: inline-block;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h3>SECOND LOCK</h3>
  <div id="start"></div>
  <div id="error"></div>

  <!-- Lock 1 -->
  <div class="pass">
    <label>Enter Code Line 1:</label>
    <input type="text" id="code1" />
    <button id="submit1">Submit</button>
    <span class="response" id="response1"></span>
  </div>

  <!-- Lock 2 -->
  <div class="pass2">
    <label>Enter Code Line 2:</label>
    <input type="text" id="code2" />
    <button id="submit2">Submit</button>
    <span class="response" id="response2"></span>
  </div>

  <!-- Lock 3 -->
  <div class="pass3">
    <label>Enter Code Line 3:</label>
    <input type="text" id="code3" />
    <button id="submit3">Submit</button>
    <span class="response" id="response3"></span>
  </div>

  <!-- Lock 4 -->
  <div class="pass4">
    <label>Enter Code Line 4:</label>
    <input type="text" id="code4" />
    <button id="submit4">Submit</button>
    <span class="response" id="response4"></span>
  </div>

  <script>
    const locks = [
      'print("Hello World")',
      "if 'StartUp' == 'True':",
      "restore == ['Debug', 'Recompile', 'Save']",
      "else:"
    ];

    const passwordChunks = ["26", "07", "59", "69"];
    const responses = [
      "Correct! First code fragment: 26",
      "Correct! Second code fragment: 07",
      "Correct! Third code fragment: 59",
      "Correct! Final code fragment: 69"
    ];

    document.addEventListener("DOMContentLoaded", () => {
      const textElement = document.getElementById("start");
      const errorElement = document.getElementById("error");
      const introLines = [
        "Welcome to the Second Lock",
        "You will need to examine the ancient code presented.",
        "",
        "Accessing encrypted data logs…",
        "Data retrieval successful.",
        "",
        "MESSAGE FROM THE ARCHIVE:",
        "-------------------------",
        "The old code stutters, broken by time and corruption.",
        "There is a key buried in its loops… but it lies hidden beneath faults.",
        "Restore what was lost. Debug. Recompile.",
        "The machine remembers, if you can teach it again…"
      ];

      let lineIndex = 0, charIndex = 0;

      // Hide later locks initially
      for (let el of document.querySelectorAll('.pass2, .pass3, .pass4')) {
        el.style.display = "none";
      }

      // Typewriter intro
      function typeLine() {
        if (lineIndex < introLines.length) {
          const currentLine = introLines[lineIndex];
          if (charIndex < currentLine.length) {
            textElement.innerHTML += currentLine[charIndex];
            charIndex++;
            setTimeout(typeLine, 40);
          } else {
            textElement.innerHTML += "<br>";
            charIndex = 0;
            lineIndex++;
            setTimeout(typeLine, 300);
          }
        } else {
          errorElement.innerHTML = `<b>ERROR 1:</b><br>print/Hello World/`;
          document.querySelector('.pass').style.display = "block";
        }
      }

      typeLine();

      for (let i = 1; i <= 4; i++) {
        document.getElementById(`submit${i}`).addEventListener("click", () => handleLock(i));
      }

      function handleLock(index) {
        const input = document.getElementById("code" + index).value.trim();
        const correct = locks[index - 1];
        const nextClass = "pass" + (index + 1);
        const responseBox = document.getElementById(`response${index}`);

        if (input === correct) {
          responseBox.textContent = responses[index - 1];
          if (index < 4) {
            const nextError = [
              `<b>ERROR 2:</b><br>if StartUp equal to True'`,
              `<b>ERROR 3:</b><br>restore == ('Debug', 'Recompile', 'Save']`,
              `<b>ERROR 4:</b><br>if 'ShutDown' == 'True':<br>    print("818 Protocol unneeded")<br>or else:`
            ];
            errorElement.innerHTML = nextError[index - 1];
            document.querySelector(`.pass${index + 1}`).style.display = "block";
          } else {
            errorElement.innerHTML = "✅ All locks solved! Final code: " + passwordChunks.join("");
          }
        } else {
          alert("❌ Incorrect. Try again.");
        }
      }
    });
  </script>
</body>
</html>

