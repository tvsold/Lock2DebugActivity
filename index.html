<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lock 2 Debugging Challenge</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans&display=swap" rel="stylesheet">

  <style>
    /* General layout */
    body {
      font-family: 'Pixelify Sans', sans-serif;
      background-color: #0b0c10;
      color: #00ff99;
      padding: 20px;
      margin: 0;
      font-size: 18px;
    }

    /* Header with cyber glow */
    h3 {
      font-family: 'Pixelify Sans', sans-serif;
      font-size: 3em;
      color: #00ff99;
      text-shadow: 0 0 5px #00ff99, 0 0 10px #00ff99, 0 0 15px #00ff99;
      margin-bottom: 20px;
    }

    /* Error text */
    #error {
      font-size: 24px;
      color: #ff3333;
      margin-top: 20px;
    }

    /* Typing intro */
    #start {
      font-size: 20px;
      line-height: 1.6;
      margin-top: 20px;
    }

    /* Input fields */
    input[type="text"] {
      width: 300px;
      padding: 10px;
      margin-top: 10px;
      font-size: 16px;
      border: 1px solid #00ff99;
      border-radius: 4px;
      background-color: #1f1f1f;
      color: #00ff99;
      font-family: 'Pixelify Sans', sans-serif;
    }

    button {
      padding: 10px 15px;
      margin-top: 10px;
      font-size: 16px;
      background-color: #00ff99;
      color: #0b0c10;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Pixelify Sans', sans-serif;
    }

    button:hover {
      background-color: #00cc77;
    }

    .pass, .pass2, .pass3, .pass4 {
      display: none;
      margin-top: 20px;
    }

    /* Hint button */
    .hint-button {
      padding: 10px 15px;
      margin-top: 10px;
      font-size: 16px;
      background-color: #3399ff;
      color: #0b0c10;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Pixelify Sans', sans-serif;
    }

    .hint-button:hover {
      background-color: #3388cc;
    }

    /* Hint text */
    .hint {
      font-size: 16px;
      color: #3399ff;
      margin-top: 10px;
    }

    /* Correct fragment text */
    .correct-fragment {
      font-size: 16px;
      color: gold;
      margin-top: 10px;
    }

  </style>
</head>
<body>
  <h3>SECOND LOCK</h3>
  <div id="start"></div>

  <!-- Error display -->
  <div id="error"></div>

  <!-- Lock 1 -->
  <div class="pass">
    <label>Enter Code Line 1:</label>
    <input type="text" id="code1" />
    <button id="submit1">Submit</button>
    <button class="hint-button" id="hint1">Hint</button>
    <div class="hint" id="hintText1"></div>
  </div>

  <!-- Lock 2 -->
  <div class="pass2">
    <label>Enter Code Line 2:</label>
    <input type="text" id="code2" />
    <button id="submit2">Submit</button>
    <button class="hint-button" id="hint2">Hint</button>
    <div class="hint" id="hintText2"></div>
  </div>

  <!-- Lock 3 -->
  <div class="pass3">
    <label>Enter Code Line 3:</label>
    <input type="text" id="code3" />
    <button id="submit3">Submit</button>
    <button class="hint-button" id="hint3">Hint</button>
    <div class="hint" id="hintText3"></div>
  </div>

  <!-- Lock 4 -->
  <div class="pass4">
    <label>Enter Code Line 4:</label>
    <input type="text" id="code4" />
    <button id="submit4">Submit</button>
    <button class="hint-button" id="hint4">Hint</button>
    <div class="hint" id="hintText4"></div>
  </div>

  <script>
    let locks = [
      'print("Hello World")', // Error 1
      "if 'Kayla' == 'Good':", // Error 2
      "good_students == ['Kayla', 'Lily', 'Peter']", // Error 3
      "else:" // Error 4
    ];

    let passwordChunks = ["26", "07", "59", "69"];

    document.addEventListener("DOMContentLoaded", () => {
      const textElement = document.getElementById("start");
      const firstLockElements = document.getElementsByClassName("pass");
      const errorElement = document.getElementById("error");
      const lines = [
        "Welcome to the Second Lock",
        "You will need to examine the ancient code presented.",
        "",
        "Accessing encrypted data logsâ€¦",
        "Data retrieval successful.",
        "",
        "MESSAGE FROM THE ARCHIVE:",
        "-------------------------",
        "To enter the maze, debug the ancient lines. Only truth grants passage."
      ];

      let lineIndex = 0;
      let charIndex = 0;

      // Hide other lock inputs initially
      for (let el of document.querySelectorAll('.pass2, .pass3, .pass4')) {
        el.style.display = "none";
      }

      // Typewriter effect
      function typeLine() {
        if (lineIndex < lines.length) {
          const currentLine = lines[lineIndex];
          if (charIndex < currentLine.length) {
            textElement.innerHTML += currentLine[charIndex];
            charIndex++;
            setTimeout(typeLine, 40);
          } else {
            textElement.innerHTML += "<br>";
            charIndex = 0;
            lineIndex++;
            setTimeout(typeLine, 300);
          }
        } else {
          // Show error message for ErrorCode1
          errorElement.innerHTML = `<b>ERROR 1:</b><br>print/Hello World/`;

          // Show first lock after error is acknowledged
          for (let el of firstLockElements) {
            el.style.display = "block";
          }
        }
      }

      typeLine();

      // Lock checking
      for (let i = 1; i <= 4; i++) {
        const submitBtn = document.getElementById(`submit${i}`);
        if (submitBtn) {
          submitBtn.addEventListener("click", () => handleLock(i));
        }
      }

      // Hints for each lock
      document.getElementById("hint1").addEventListener("click", () => {
        document.getElementById("hintText1").textContent = "Hint: Hello World needs to be inside something?";
      });

      document.getElementById("hint2").addEventListener("click", () => {
        document.getElementById("hintText2").textContent = "Hint: Shouldn't there be more singular parenthesis? Equal to... to equal... maybe two equal signs?";
      });

      document.getElementById("hint3").addEventListener("click", () => {
        document.getElementById("hintText3").textContent = "Hint: There is something wrong with those brackets..";
      });

      document.getElementById("hint4").addEventListener("click", () => {
        document.getElementById("hintText4").textContent = "Hint: Or else sounds like a threat";
      });

      function handleLock(index) {
        const input = document.getElementById("code" + index).value.trim();
        const correct = locks[index - 1];
        const nextClass = "pass" + (index + 1);

        if (input === correct) {
          const correctFragment = passwordChunks[index - 1];

          // Show the correct code fragment on the right
          const correctMessage = document.createElement("div");
          correctMessage.classList.add("correct-fragment");
          correctMessage.textContent = `Correct! First code fragment: ${correctFragment}`;
          document.getElementById(`submit${index}`).insertAdjacentElement("afterend", correctMessage);

          if (index < 4) {
            for (let el of document.getElementsByClassName(nextClass)) {
              el.style.display = "block";
            }
          } else {
            alert(`ðŸŽ‰ All locks solved! Final code: ${passwordChunks.join("")}`);
          }
        } else {
          alert("âŒ Incorrect. Try again.");
        }
      }
    });
  </script>
</body>
</html>

