<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lock 2 Debugging Challenge</title>
  <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Pixelify Sans', sans-serif;
      background-color: #0b0c10;
      color: #00ff99;
      padding: 20px;
      margin: 0;
      font-size: 18px;
    }

    h3 {
      font-family: 'Pixelify Sans', sans-serif;
      font-size: 3em;
      color: #00ff99;
      text-shadow: 0 0 5px #00ff99, 0 0 10px #00ff99, 0 0 15px #00ff99;
      margin-bottom: 20px;
    }

    #error {
      font-size: 24px;
      color: #ff3333;
      margin-top: 20px;
    }

    #start {
      font-size: 20px;
      line-height: 1.6;
      margin-top: 20px;
    }

    input[type="text"] {
      width: 300px;
      padding: 10px;
      margin-top: 10px;
      font-size: 16px;
      border: 1px solid #00ff99;
      border-radius: 4px;
      background-color: #1f1f1f;
      color: #00ff99;
      font-family: 'Pixelify Sans', sans-serif;
    }

    button {
      padding: 10px 15px;
      margin-top: 10px;
      font-size: 16px;
      background-color: #00ff99;
      color: #0b0c10;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Pixelify Sans', sans-serif;
    }

    button:hover {
      background-color: #00cc77;
    }

    .pass, .pass2, .pass3, .pass4 {
      display: none;
      margin-top: 20px;
    }

    .response {
      margin-left: 20px;
      color: #FFD700;
      display: inline-block;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h3>SECOND LOCK</h3>
  <div id="start"></div>
  <div id="error"></div>

  <!-- Lock 1 -->
  <div class="pass">
    <label>Enter Code Line 1:</label>
    <input type="text" id="code1" />
    <button id="submit1">Submit</button>
    <span class="response" id="response1"></span>
  </div>

  <!-- Lock 2 -->
  <div class="pass2">
    <label>Enter Code Line 2:</label>
    <input type="text" id="code2" />
    <button id="submit2">Submit</button>
    <span class="response" id="response2"></span>
  </div>

  <!-- Lock 3 -->
  <div class="pass3">
    <label>Enter Code Line 3:</label>
    <input type="text" id="code3" />
    <button id="submit3">Submit</button>
    <span class="response" id="response3"></span>
  </div>

  <!-- Lock 4 -->
  <div class="pass4">
    <label>Enter Code Line 4:</label>
    <input type="text" id="code4" />
    <button id="submit4">Submit</button>
    <span class="response" id="response4"></span>
  </div>

  <script>
    const locks = [
      'print("Hello World")',
      "if 'Kayla' == 'Good':",
      "good_students == ['Kayla', 'Lily', 'Peter']",
      "else:"
    ];

    const passwordChunks = ["26", "07", "59", "69"];
    const responses = [
      "Correct! First code fragment: 26",
      "Correct! Second code fragment: 07",
      "Correct! Third code fragment: 59",
      "Correct! Final code fragment: 69"
    ];

    document.addEventListener("DOMContentLoaded", () => {
      const textElement = document.getElementById("start");
      const errorElement = document.getElementById("error");
      const introLines = [
        "Welcome to the Second Lock",
        "You will need to examine the ancient code presented.",
        "",
        "Accessing encrypted data logs…",
        "Data retrieval successful.",
        "",
        "MESSAGE FROM THE ARCHIVE:",
        "-------------------------",
        "To enter the maze, debug the ancient lines. Only truth grants passage."
      ];

      let lineIndex = 0, charIndex = 0;

      // Hide later locks initially
      for (let el of document.querySelectorAll('.pass2, .pass3, .pass4')) {
        el.style.display = "none";
      }

      // Typewriter intro
      function typeLine() {
        if (lineIndex < introLines.length) {
          const currentLine = introLines[lineIndex];
          if (charIndex < currentLine.length) {
            textElement.innerHTML += currentLine[charIndex];
            charIndex++;
            setTimeout(typeLine, 40);
          } else {
            textElement.innerHTML += "<br>";
            charIndex = 0;
            lineIndex++;
            setTimeout(typeLine, 300);
          }
        } else {
          errorElement.innerHTML = `<b>ERROR 1:</b><br>print/Hello World/`;
          document.querySelector('.pass').style.display = "block";
        }
      }

      typeLine();

      for (let i = 1; i <= 4; i++) {
        document.getElementById(`submit${i}`).addEventListener("click", () => handleLock(i));
      }

      function handleLock(index) {
        const input = document.getElementById("code" + index).value.trim();
        const correct = locks[index - 1];
        const nextClass = "pass" + (index + 1);
        const responseBox = document.getElementById(`response${index}`);

        if (input === correct) {
          responseBox.textContent = responses[index - 1];
          if (index < 4) {
            const nextError = [
              `<b>ERROR 2:</b><br>if Kayla equal to Good'`,
              `<b>ERROR 3:</b><br>good_students == ('Kayla', 'Lily', 'Peter')`,
              `<b>ERROR 4:</b><br>if 'Peter' == 'Good':<br>    print("Good job Peter")<br>or else:`
            ];
            errorElement.innerHTML = nextError[index - 1];
            document.querySelector(`.pass${index + 1}`).style.display = "block";
          } else {
            errorElement.innerHTML = "✅ All locks solved! Final code: " + passwordChunks.join("");
          }
        } else {
          alert("❌ Incorrect. Try again.");
        }
      }
    });
  </script>
</body>
</html>
